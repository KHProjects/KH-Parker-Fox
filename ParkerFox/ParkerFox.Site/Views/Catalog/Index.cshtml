@model ParkerFox.Site.ViewModels.Store.CatalogViewModel
@{
    ViewBag.Title = "Index";
}

<style>
    #catalog a.addToBasketCommand
    {
        color: red;
    }
</style>

<dl id="catalog">
@foreach(var product in Model.Products)
{
    <dt>
        image
        <div style="width:100px;height:100px;background-color:green"></div>
    </dt>
    <dd>
        @product.Name
        <a class="addToBasketCommand">add to basket</a>
    </dd>
}
</dl>

<script type="text/javascript">
    $(function () {
        $('#catalog a.addToBasketCommand').on("click", addToBasketCommandEventHandler);
    });

    function addToBasketCommandEventHandler(e) {
        $.ajax({
            url: "/api/product",
            data: { id: 2 },
            statusCode: {
                200: onAddedToBasket,
                404: onErrorAddToBasket
            }
        });
    }
    
    function onAddedToBasket(product) {
        alert('bla '+product.Name);
    }

    function onErrorAddToBasket() {
        alert("product not found");
    }
</script>